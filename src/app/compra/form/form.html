<custom-form item="entity" options="form_options">
  <div layout layout-sm="column">
    <md-autocomplete flex md-selected-item-change="selectProveedor(item)" md-search-text="search.nombre"
                     md-items="item in proveedores | filter:search" md-item-text="item.nombre"
                     md-floating-label="Proveedor" md-selected-item="selected" md-autoselect="true"
                     style="width: 70%;">
      <md-item-template>
        <span md-highlight-text="search.nombre" md-highlight-flags="^i">{{item.nombre}}</span>
      </md-item-template>
      <md-not-found>
        Proveedor no encontrado.
      </md-not-found>
    </md-autocomplete>
    <md-datepicker ng-model="entity.fecha" md-placeholder="Fecha"></md-datepicker>
  </div>
  <div>
    <h3 class="md-title">Detalles</h3>
    <div layout layout-sm="column" ng-repeat="detalle in entity.detalles">
      <md-autocomplete flex md-selected-item-change="selectProducto(selectedProduct, detalle)" md-search-text="searchProducto.nombre"
                       md-items="item in productos | filter:searchProducto" md-item-text="item.nombre"
                       md-floating-label="Producto" md-selected-item="selectedProduct" md-autoselect="true"
                       style="width: 70%;">
        <md-item-template>
          <span md-highlight-text="search.nombre" md-highlight-flags="^i">{{item.nombre}}</span>
        </md-item-template>
        <md-not-found>
          Producto no encontrado.
        </md-not-found>
      </md-autocomplete>
      <md-input-container flex>
        <label>Cantidad</label>
        <input ng-model="detalle.cantidad">
      </md-input-container>
    </div>
    <button type="button" ng-click="addDetalle()">Agregar</button>
    <button type="button" ng-click="deleteDetalle()">Remover</button>
  </div>
</custom-form>
{{detalles}}
